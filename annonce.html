<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Propri√©t√©s avec agent</title>
  <style>
    body {
      font-family: Arial;
      margin: 20px;
    }

    form {
      border: 1px solid #ccc;
      padding: 20px;
      margin-bottom: 30px;
      width: 400px;
    }

    label {
      display: block;
      margin-top: 10px;
    }

    input[type="text"],
    input[type="number"],
    input[type="file"],
    input[type="tel"] {
      width: 100%;
      padding: 8px;
      margin-top: 5px;
    }

    button {
      margin-top: 10px;
      padding: 8px 12px;
      background-color: teal;
      color: white;
      border: none;
      cursor: pointer;
    }

    .property-card {
      border: 1px solid #ccc;
      padding: 15px;
      margin-bottom: 20px;
      width: 400px;
    }

    .property-card img {
      max-width: 100%;
      height: auto;
      margin-bottom: 10px;
    }

    .agent-info {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-top: 10px;
    }

    .agent-info img {
      width: 40px;
      height: 40px;
      border-radius: 50%;
    }

    .actions {
      display: flex;
      gap: 10px;
      margin-top: 10px;
    }

    .retired {
      background-color: #f8d7da;
      color: #721c24;
      padding: 10px;
      text-align: center;
      font-weight: bold;
    }
  </style>
</head>
<body>

  <h2>Ajouter une propri√©t√©</h2>

  <form id="propertyForm">
    <label for="price">Prix ($) :</label>
    <input type="number" id="price" required>

    <label for="title">Titre :</label>
    <input type="text" id="title" required>

    <label for="address">Adresse :</label>
    <input type="text" id="address" required>

    <label for="beds">Nombre de lits :</label>
    <input type="number" id="beds" required>

    <label for="baths">Nombre de salles de bain :</label>
    <input type="number" id="baths" required>

    <label for="area">Surface (en sqft) :</label>
    <input type="number" id="area" required>

    <label for="kitchen">Cuisine :</label>
    <input type="text" id="kitchen" required>

    <label for="image">Image de la propri√©t√© :</label>
    <input type="file" id="image" accept="image/*" required>

    <label for="agentName">Nom de l‚Äôagent :</label>
    <input type="text" id="agentName" required>

    <label for="agentPhone">T√©l√©phone :</label>
    <input type="tel" id="agentPhone" required>

    <label for="agentPhoto">Photo de l‚Äôagent :</label>
    <input type="file" id="agentPhoto" accept="image/*" required>

    <button type="submit">Ajouter</button>
  </form>

  <h2>Liste des propri√©t√©s</h2>
  <div id="propertiesContainer"></div>

  <script>
    const propertiesContainer = document.getElementById('propertiesContainer');
    let properties = JSON.parse(localStorage.getItem('properties')) || [];

    function saveProperties() {
      localStorage.setItem('properties', JSON.stringify(properties));
    }

    function renderProperties() {
      propertiesContainer.innerHTML = '';
      properties.forEach((prop, index) => {
        const card = document.createElement('div');
        card.className = 'property-card';

        if (prop.retired) {
          card.innerHTML = `<div class="retired">üè† Cette propri√©t√© a √©t√© retir√©e (achet√©e)</div>`;
        } else {
          card.innerHTML = `
            <img src="${prop.image}" alt="Image de la propri√©t√©">
            <h3>$${prop.price}</h3>
            <h4>${prop.title}</h4>
            <p><strong>Adresse :</strong> ${prop.address}</p>
            <p><strong>Lits :</strong> ${prop.beds} | <strong>Salles de bain :</strong> ${prop.baths} | <strong>Surface :</strong> ${prop.area} sqft</p>
            <p><strong>Cuisine :</strong> ${prop.kitchen}</p>
            <div class="agent-info">
              <img src="${prop.agentPhoto}" alt="Agent">
              <div>
                <p><strong>${prop.agentName}</strong></p>
                <p>${prop.agentPhone}</p>
              </div>
            </div>
            <div class="actions">
              <button onclick="editProperty(${index})">Modifier</button>
              <button onclick="deleteProperty(${index})">Supprimer</button>
              <button onclick="retireProperty(${index})">Retirer (Achet√©)</button>
            </div>
          `;
        }

        propertiesContainer.appendChild(card);
      });
    }

    function deleteProperty(index) {
      properties.splice(index, 1);
      saveProperties();
      renderProperties();
    }

    function editProperty(index) {
      const newTitle = prompt("Nouveau titre :", properties[index].title);
      if (newTitle) properties[index].title = newTitle;

      const newPrice = prompt("Nouveau prix :", properties[index].price);
      if (newPrice) properties[index].price = newPrice;

      saveProperties();
      renderProperties();
    }

    function retireProperty(index) {
      properties[index].retired = true;
      saveProperties();
      renderProperties();
    }

    document.getElementById('propertyForm').addEventListener('submit', function (e) {
      e.preventDefault();

      const price = document.getElementById('price').value;
      const title = document.getElementById('title').value;
      const address = document.getElementById('address').value;
      const beds = document.getElementById('beds').value;
      const baths = document.getElementById('baths').value;
      const area = document.getElementById('area').value;
      const kitchen = document.getElementById('kitchen').value;
      const agentName = document.getElementById('agentName').value;
      const agentPhone = document.getElementById('agentPhone').value;
      const imageFile = document.getElementById('image').files[0];
      const agentPhotoFile = document.getElementById('agentPhoto').files[0];

      const reader1 = new FileReader();
      const reader2 = new FileReader();

      reader1.onload = function (event1) {
        const imageUrl = event1.target.result;

        reader2.onload = function (event2) {
          const agentPhotoUrl = event2.target.result;

          const newProperty = {
            price,
            title,
            address,
            beds,
            baths,
            area,
            kitchen,
            image: imageUrl,
            agentName,
            agentPhone,
            agentPhoto: agentPhotoUrl,
            retired: false
          };

          properties.push(newProperty);
          saveProperties();
          renderProperties();
          document.getElementById('propertyForm').reset();
        };

        if (agentPhotoFile) {
          reader2.readAsDataURL(agentPhotoFile);
        }
      };

      if (imageFile) {
        reader1.readAsDataURL(imageFile);
      }
    });

    // Initial rendering
    renderProperties();
  </script>

</body>
</html>
